/* Reset & Basics */
html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
}

body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* --- Fluid 3D Card Styling --- */
.card-scene {
    perspective: 1500px;
}

/* 3D Entrance Animation */
@keyframes card-enter-3d {
    0% {
        opacity: 0;
        transform: translateY(100vh) rotateX(45deg) scale(0.5);
    }
    60% {
        opacity: 1;
        transform: translateY(-20px) rotateX(-5deg) scale(1.02);
    }
    100% {
        opacity: 1;
        transform: translateY(0) rotateX(0) scale(1);
    }
}

.card-entrance {
    animation: card-enter-3d 1.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* Float animation runs after entrance (handled implicitly or via chained animation, 
   but simplistic float here usually conflicts with transforms. 
   Better to float the content or use wrapper if needed, 
   but keeping simple for stability of the 3D effect requested) */
.card-object {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1); 
    transform-origin: center center;
}

.is-interacting {
    transition: transform 0.1s linear; 
}

.card-object.is-flipped {
    transform: rotateY(180deg);
}

.card-face {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden; /* Safari Fix */
    -webkit-font-smoothing: subpixel-antialiased;
    transform: translateZ(0px); 
    transform-style: preserve-3d;
}

.card-back {
    transform: rotateY(180deg) translateZ(0px);
}

.backface-hidden {
    backface-visibility: hidden;
}

/* 3D Depth Utilities */
.transform-style-3d { transform-style: preserve-3d; }
.translate-z-10 { transform: translateZ(10px); }
.translate-z-20 { transform: translateZ(20px); }
.translate-z-30 { transform: translateZ(30px); }
.translate-z-40 { transform: translateZ(40px); }

/* --- Marquee Logic (Seamless Infinite Loop) --- */
.marquee-wrapper {
    width: 100%;
    overflow: hidden;
    /* Masking for softer edges */
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
}

.marquee-content {
    display: flex;
    width: max-content; /* Ensure container fits all items */
}

/* Generic Left Scroll */
.marquee-content {
    animation: scroll-left 20s linear infinite;
    /* FORCE RUNNING - Never pause */
    animation-play-state: running !important;
}

/* For Gallery - Left and Right variants */
.marquee-left {
    animation: scroll-left 15s linear infinite;
    animation-play-state: running !important;
}

.marquee-right {
    animation: scroll-right 15s linear infinite;
    animation-play-state: running !important;
}

/* Ensure no pause on hover */
.marquee-content:hover {
    animation-play-state: running !important;
}

/* Keyframes */
@keyframes scroll-left {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); } 
}

@keyframes scroll-right {
    0% { transform: translateX(-50%); }
    100% { transform: translateX(0); }
}

/* Images */
.gallery-img {
    height: 10rem; 
    width: auto;
    border-radius: 0.5rem; 
    filter: grayscale(100%);
    border: 1px solid rgba(255,255,255,0.1);
    object-fit: cover;
    transition: all 0.3s;
    user-select: none;
    /* Explicitly prevent events */
    pointer-events: none; 
}
@media (min-width: 768px) {
    .gallery-img {
        height: 16rem; 
    }
}

/* --- Map Interactivity --- */
.map-point {
    position: absolute;
    width: 20px;
    height: 20px;
    transform: translate(-50%, -50%);
    /* Disable Click interactions */
    pointer-events: none; 
    z-index: 10;
}

/* Tooltip */
.map-point::after {
    content: attr(data-country);
    position: absolute;
    bottom: 150%;
    left: 50%;
    transform: translateX(-50%) translateY(10px);
    background: #c5a059;
    color: #0f1115;
    padding: 4px 10px;
    border-radius: 2px;
    font-size: 0.7rem;
    font-weight: 800;
    text-transform: uppercase;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    font-family: 'Lato', sans-serif;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    z-index: 20;
}

/* Tooltip Arrow */
.map-point::before {
    content: '';
    position: absolute;
    bottom: 120%;
    left: 50%;
    margin-left: -4px;
    border-width: 4px;
    border-style: solid;
    border-color: #c5a059 transparent transparent transparent;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 19;
}

/* Active State controlled by JS */
.map-point.is-active::after,
.map-point.is-active::before {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
}

.point-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    box-shadow: 0 0 10px rgba(197, 160, 89, 0.8);
    transition: all 0.3s;
}

.point-pulse {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0.5;
    animation: pulse-ring 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
}

/* Scale effect on active */
.map-point.is-active .point-dot {
    background-color: #fff;
    transform: translate(-50%, -50%) scale(1.8);
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
}

@keyframes pulse-ring {
    0% { transform: scale(0.33); opacity: 0.8; }
    80%, 100% { transform: scale(3); opacity: 0; }
}

@keyframes fade-in-up {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in-up {
    animation: fade-in-up 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 6px;
}
::-webkit-scrollbar-track {
    background: #0f1115;
}
::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
    background: #c5a059;
}